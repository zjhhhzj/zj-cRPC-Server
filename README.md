# c-Server
c++
ubt24
概述：基于 C++ 实现的高性能网络服务器，专注于高效连接管理、安全性和稳定性，适用于自定义协议通信和高并发场景。
技术栈：C++、Linux 系统编程、Epoll（LT 水平触发）、线程池、自定义协议。
核心特性：
事件驱动模型：基于 Epoll 实现 LT（水平触发）事件模型，支持高并发连接处理。
守护进程：创建新会话，脱离控制终端，确保服务在后台稳定运行。
延迟回收：使用定时器和回收线程实现连接资源的延迟回收机制，避免频繁创建和销毁资源。
心跳包机制：自定义心跳包格式，支持心跳包检测，超时断开无效连接。
控制连接数：使用全局计数器记录当前活跃连接数，允许运行时动态调整最大连接数。
线程池：具有专门线程池线程，动态分配任务，减少线程创建和销毁的开销，实现任务队列的同步。
黑客攻击防范：
实现 IP 频率限制，防止 DDoS 攻击。
支持消息头校验，防止恶意数据包注入。
提供畸形包检测与过滤，应对非法数据包攻击。
热设计：支持热加载配置文件和动态资源更新。
性能表现：在 4 核 8 线程的 Linux 环境下，基于自定义协议的压力测试达到 12 万 QPS，表现出色

权重控制：

如果希望某些节点优先被连接，可以将这些节点放在列表的前面。例如：
复制
const char* zookeeper_hosts = "192.168.1.1:2181,192.168.1.2:2181,192.168.1.3:2181";
这里 192.168.1.1:2181 是优先尝试的节点。
随机化连接顺序：
如果希望客户端随机选择节点，可以在程序中动态打乱节点列表的顺序。(!!!)



幂等性设计：
确保 RPC 服务的幂等性，即重复调用同一接口不会产生副作用。
熔断与限流：
在负载均衡器或客户端实现熔断机制，避免连续调用失败的服务节点。
对高频请求进行限流，防止系统过载。

集中日志管理：
使用 ELK（Elasticsearch、Logstash、Kibana）或其他日志系统（如 Fluentd）集中管理日志。
分布式监控：
部署 Prometheus + Grafana，对 Zookeeper、负载均衡器、RPC 服务节点和后端存储进行监控。
监控指标包括 QPS、响应时间、错误率、节点健康状态等。

sudo apt update
sudo apt install -y build-essential autoconf libtool pkg-config
sudo apt install -y protobuf-compiler
sudo apt install -y libgrpc-dev libgrpc++-dev
sudo apt install libzookeeper-mt-dev